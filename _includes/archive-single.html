{% if post.id %}
  {% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}
{% else %}
  {% assign title = post.title %}
{% endif %}

<ul class="bibliography">
  <li class="pub-scholar">
    <div class="pub-title" style="font-size: 1rem; font-weight: 600;">
      {% if post.paperurl %}
        <a href="{{ post.paperurl }}">{{ title }}</a>
      {% else %}
        {{ title }}
      {% endif %}
    </div>

    {% if post.citation %}
      <div class="pub-citation">{{ post.citation }}</div>
    {% endif %}

    <div class="pub-links">
      {% if post.paperurl %}
        <a href="{{ post.paperurl }}">Download Paper</a>
      {% endif %}
      {% if post.bibtexurl %}
        {% if post.paperurl %}, {% endif %}
        <a href="{{ post.bibtexurl }}" onclick="copyBibtex('{{ post.bibtexurl }}'); return false;">Cite this work</a>
      {% endif %}
    </div>
  </li>
</ul>

<script>
function copyBibtex(url) {
  fetch(url)
    .then(response => response.text())
    .then(text => {
      navigator.clipboard.writeText(text);
      alert("BibTeX copied to clipboard!");
    });
}
</script>
